# stp-campus-qr

## Приложение клиент для отображения qr-кодов кампусной системы университета

Написать клиентское приложение отображающее QR-коды доступа к кампусной системе университета.

Система работает с использованием одноразовых QR-кодов. Уникальность основывается на постоянно увеличивающемся индексе. Если код с заданным индексом использован для доступа кодв с равным или меньшем индексом перестают работать.

### Аутентификация:

POST https://bgpu.ru/campus/api/v1/auth?login=*&pwd=*

* - ваш логин и пароль в кампусной системе

Аутентификация проводится POST запросом Content-Type: multipart/form-data; Сессия с сервера отправляется Set-Cookie: JSESSIONID=6A093EC4262608DAB5E657700D96BEE6;

### Получение QR-кодов

GET https://bgpu.ru/campus/api/v1/area/qr?index=53831

Запрос присылает 30 QR-кодов для прохода через СКУД кампусной системы. Если параметр index не указать будет прислан список по последнему актуальному индексу. 

Ответ:

```json
[
  {
    "qr": "1803:53831:27d9200cb2033b0c8ad5cb4e30817e10d2268bea6b0198fa2776f1655e4abcb5",
    "countIndex": 53831
  },
  ...
]
```

поле qr содержит текст для QR-кода, countIndex - индекс кода  в системе.

### Получение информации об увеличении индекса в системе

Лонгпулинг запроса: 

https://bgpu.ru/campus/api/v1/area/counter-index

код 504 возвращается по таймауту лонгпулинга, в случае увеличения значения приходит число актуального индекса
